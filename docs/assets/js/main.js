"use strict";const input=document.querySelector(".js-name-input"),button=document.querySelector(".js-button");let favoriteShowList=document.querySelector(".js-shows-favorite"),showList=document.querySelector(".js-shows-list"),resetButton=document.querySelector(".js-reset-button"),resultsTitle=document.querySelector(".js__content__title"),resultsTitleFav=document.querySelector(".js__content__fav"),tvShows=[],favTvShows=[];function setLocalStorage(){localStorage.setItem("favTvShows",JSON.stringify(favTvShows))}function getLocalStorage(){const t=localStorage.getItem("favTvShows"),s=JSON.parse(t);null!==s&&(favTvShows=s,paintFavShows(),listenShows())}const getServerData=function(){fetch(`https://api.tvmaze.com/search/shows?q=${input.value}`).then(function(t){return t.json()}).then(function(t){tvShows=t,paintShows(),listenShows()}).catch(function(t){console.log("Error al traer los datos del servidor",t)})},paintShows=function(){let t="";for(let s=0;s<tvShows.length;s++){t+=!0===(-1!==favTvShows.findIndex(function(t){return t.id==tvShows[s].show.id}))?`<li class="js-show show__container show__container-click" id=${tvShows[s].show.id}>`:`<li class="js-show show__container" id=${tvShows[s].show.id}>`,null===tvShows[s].show.image?t+="<img class=\"show__container-img\" src ='https://via.placeholder.com/210x295/ffffff/666666/?text=TV.'>":t+=`<img class="show__container-img" src= ${tvShows[s].show.image.medium} alt= ${tvShows[s].show.name}>`,t+=`<h3 class="show__title">${tvShows[s].show.name}</h3>`,t+="</li>"}resultsTitle.classList.remove("hidden"),resultsTitleFav.classList.remove("hidden"),showList.innerHTML=t},paintFavShows=function(){let t="";for(let s=0;s<favTvShows.length;s++)t+=`<li class="js-show show__container show__container-fav" id=${favTvShows[s].id} >`,t+='<div class= "close-fav js-close-button" >X</div>',null===favTvShows[s].image?t+="<img class=\"show__img show__img-fav\" src ='https:via.placeholder.com/210x295/ffffff/666666/?text=TV.'>":t+=`<img class="show__img show__img-fav" src= ${favTvShows[s].image.medium} alt= ${favTvShows[s].name}>`,t+=`<h3 class="show__title show__title-fav">${favTvShows[s].name}</h3>`,t+="</li>";favoriteShowList.innerHTML=t},changeFavs=function(t){const s=parseInt(t.currentTarget.id),e=favTvShows.findIndex(function(t){return t.id===s});if(!0===(-1!==e))favTvShows.splice(e,1);else for(let t=0;t<tvShows.length;t++)tvShows[t].show.id===s&&favTvShows.push(tvShows[t].show);paintShows(),listenShows(),setLocalStorage(),paintFavShows();let o=document.querySelectorAll(".js-close-button");for(const t of o)t.addEventListener("click",changeFavs)},listenShows=function(){const t=document.querySelectorAll(".js-show");for(const s of t)s.addEventListener("click",changeFavs)},reset=function(t){t.preventDefault(),favTvShows=[],paintFavShows()};resetButton.addEventListener("click",reset);const search=function(t){t.preventDefault(),fetch(`https://api.tvmaze.com/search/shows?q=${input.value}`).then(function(t){return t.json()}).then(function(t){tvShows=t,paintShows(),listenShows()}).catch(function(t){console.log("Error al traer los datos del servidor",t)})};getLocalStorage(),button.addEventListener("click",search);
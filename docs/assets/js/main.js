"use strict";const input=document.querySelector(".js-name-input"),button=document.querySelector(".js-button");let favoriteShowList=document.querySelector(".js-shows-favorite"),showList=document.querySelector(".js-shows-list"),resetButton=document.querySelector(".js-reset-button"),tvShows=[],favTvShows=[];function setLocalStorage(){localStorage.setItem("favTvShows",JSON.stringify(favTvShows))}function getLocalStorage(){const t=localStorage.getItem("favTvShows"),o=JSON.parse(t);null!==o&&(favTvShows=o,paintFavShows(),listenShows())}const getServerData=function(){fetch(`https://api.tvmaze.com/search/shows?q=${input.value}`).then(function(t){return t.json()}).then(function(t){tvShows=t,paintShows(),listenShows()}).catch(function(t){console.log("Error al traer los datos del servidor",t)})},paintShows=function(){let t="";for(let o=0;o<tvShows.length;o++){t+=!0===(-1!==favTvShows.findIndex(function(t){return t.id==tvShows[o].show.id}))?`<li class="js-show show__container show__container-click" id=${tvShows[o].show.id}>`:`<li class="js-show show__container" id=${tvShows[o].show.id}>`,null===tvShows[o].show.image?t+="<img src ='https://via.placeholder.com/210x295/ffffff/666666/?text=TV.'>":t+=`<img class="show__img" src= ${tvShows[o].show.image.medium} alt= ${tvShows[o].show.name}>`,t+=`<h3 class="show__title">${tvShows[o].show.name}</h3>`,t+="</li>"}showList.innerHTML=t},paintFavShows=function(){let t="";for(let o=0;o<favTvShows.length;o++)t+=`<li class="js-show show__container show__container-fav" id=${favTvShows[o].id} >`,t+='<div class= "close-fav js-close-button" >X</div>',null===favTvShows[o].image?t+="<img class=\"show__img show__img-fav\" src ='https:via.placeholder.com/210x295/ffffff/666666/?text=TV.'>":t+=`<img class="show__img show__img-fav" src= ${favTvShows[o].image.medium} alt= ${favTvShows[o].name}>`,t+=`<h3 class="show__title show__title-fav">${favTvShows[o].name}</h3>`,t+="</li>";favoriteShowList.innerHTML=t},changeFavs=function(t){const o=parseInt(t.currentTarget.id),s=favTvShows.findIndex(function(t){return t.id===o});if(!0===(-1!==s))favTvShows.splice(s,1);else for(let t=0;t<tvShows.length;t++)tvShows[t].show.id===o&&favTvShows.push(tvShows[t].show);paintShows(),listenShows(),setLocalStorage(),paintFavShows();let e=document.querySelectorAll(".js-close-button");for(const t of e)t.addEventListener("click",changeFavs)},listenShows=function(){const t=document.querySelectorAll(".js-show");for(const o of t)o.addEventListener("click",changeFavs)},reset=function(t){t.preventDefault(),favTvShows=[],paintFavShows()};resetButton.addEventListener("click",reset);const search=function(t){t.preventDefault(),fetch(`https://api.tvmaze.com/search/shows?q=${input.value}`).then(function(t){return t.json()}).then(function(t){tvShows=t,paintShows(),listenShows()}).catch(function(t){console.log("Error al traer los datos del servidor",t)})};getLocalStorage(),button.addEventListener("click",search);